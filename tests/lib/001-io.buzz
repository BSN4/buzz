import "lib/std.buzz";
import "lib/io.buzz";

test "Write & read a file" {
    File file = File.open("/Users/giann/tmp-code/hello.txt", mode: FileMode.write);

    file.write("Hello World");

    file.close();
    
    | Now read it
    File fileB = File.open("/Users/giann/tmp-code/hello.txt", mode: FileMode.read);

    assert(file.readAll() == "Hello World", message: "Could write and read a file");

    fileB.close();
}

test "Read by line" {
    File file = File.open("/Users/giann/git/buzz/README.md", mode: FileMode.read);

    for (num lines = 0, str? line = ""; line != null; line = file.readLine(), lines = lines + 1) {
        print("{lines}: {line}");
    }

    file.close();
}

test "Write on stdout" {
    stdout.write("Hello World !\n");
}